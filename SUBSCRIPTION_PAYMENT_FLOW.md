# ุชุฏูู ุงูุชุณุฌูู ูุงูุงุดุชุฑุงู ูุงูุฏูุน - ุงูุชูุซูู ุงููุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุณุชูุฏ ููุซู ุงูุชุฏูู ุงููุงูู ููุธุงู ุงูุชุณุฌูู ูุงูุงุดุชุฑุงู ูุงูุฏูุน ูู ุงูุชุทุจูู.

---

## ๐ ุงูุชุฏูู ุงููุงูู ูููุณุชุฎุฏู

### 1๏ธโฃ ุงูุตูุญุฉ ุงูุฃููู (Landing Page)
- **ุงูููู**: `src/pages/LandingPage.tsx`
- **ุงููุตู**: ุฃูู ุตูุญุฉ ุชุธูุฑ ุนูุฏ ูุชุญ ุงูุชุทุจูู
- **ุงูุฅุฌุฑุงุกุงุช ุงููุชุงุญุฉ**:
  - ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ
  - ุชุณุฌูู ุงูุฏุฎูู (ูููุณุชุฎุฏููู ุงููุณุฌููู)

---

### 2๏ธโฃ ุตูุญุฉ ุงูุชุณุฌูู (Register Page)
- **ุงูููู**: `src/components/auth/RegisterPage.tsx`
- **ุงูุจูุงูุงุช ุงููุทููุจุฉ**:
  - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  - ุงุณู ุงููุณุชุฎุฏู
  - ุงูุงุณู ุงููุงูู
  - ุงูุฏููุฉ
  - ูููุฉ ุงููุฑูุฑ
- **ุงูุนูููุฉ**:
  1. ุฅูุดุงุก ุญุณุงุจ ูู `auth.users` (Supabase Auth)
  2. ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `users` ุจุงูุญุงูุฉ `pending_email_verification`
  3. ุฅุฑุณุงู ุฑูุฒ ุชูุนูู ููุจุฑูุฏ ุงูุฅููุชุฑููู
  4. ุงูุชูุฌู ูุตูุญุฉ ุชูุนูู ุงูุจุฑูุฏ

---

### 3๏ธโฃ ุตูุญุฉ ุชูุนูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- **ุงูููู**: `src/components/auth/EmailVerificationPage.tsx`
- **ุงูุนูููุฉ**:
  1. ุฅุฏุฎุงู ุฑูุฒ ุงูุชูุนูู ุงููุฑุณู ููุจุฑูุฏ
  2. ุงูุชุญูู ูู ุงูุฑูุฒ
  3. ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู ุฅูู `pending_subscription`
  4. ุชุญุฏูุซ `email_verified = true`
  5. ุงูุชูุฌู ุงูุชููุงุฆู ูุตูุญุฉ ุงูุงุดุชุฑุงู

---

### 4๏ธโฃ ุตูุญุฉ ุงุฎุชูุงุฑ ุงูุจุงูุฉ (Subscription Page)
- **ุงูููู**: `src/components/subscription/SubscriptionPage.tsx`
- **ุงูุจุงูุงุช ุงููุชุงุญุฉ**:
  - ุงูุจุงูุฉ ุงูุฃุณุงุณูุฉ ุงูุดูุฑูุฉ ($29.99)
  - ุงูุจุงูุฉ ุงูุงุญุชุฑุงููุฉ ุงูุดูุฑูุฉ ($49.99)
  - ุงูุจุงูุฉ ุงููููุฒุฉ ุงูุณูููุฉ ($499.99)
- **ุงูุนูููุฉ**:
  1. ุนุฑุถ ุฌููุน ุงูุจุงูุงุช ูู ุฌุฏูู `subscription_plans`
  2. ุงุฎุชูุงุฑ ุงูุจุงูุฉ ุงูููุงุณุจุฉ
  3. ุงูุชูุฌู ูุจุงุดุฑุฉ ูุตูุญุฉ ุงูุฏูุน

---

### 5๏ธโฃ ุตูุญุฉ ุงูุฏูุน (Payment Page)
- **ุงูููู**: `src/components/payments/PaymentPage.tsx`
- **ุทุฑู ุงูุฏูุน ุงููุชุงุญุฉ**:

#### ุฃ) PayPal
- **ุงูุญุงูุฉ**: ุฏูุน ููุฑู
- **ุงูุนูููุฉ**:
  1. ุงูุถุบุท ุนูู ุฒุฑ "ุงูุฏูุน ุจู PayPal"
  2. ูุญุงูุงุฉ ุฏูุน ูุงุฌุญ
  3. ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `payments` ุจุญุงูุฉ `completed`
  4. ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `subscriptions` ุจุญุงูุฉ `active`
  5. ุชุญุฏูุซ ุงููุณุชุฎุฏู:
     - `status = 'active'`
     - `subscription_status = 'active'`
     - `is_active = true`
  6. ุงูุชูุฌู ูุตูุญุฉ ุงููุฌุงุญ
  7. **ูููู ุชุณุฌูู ุงูุฏุฎูู ููุฑุงู**

#### ุจ) ุงูุจุทุงูุฉ ุงูุจูููุฉ (Credit Card)
- **ุงูุญุงูุฉ**: ุฏูุน ููุฑู
- **ุงูุนูููุฉ**:
  1. ุฅุฏุฎุงู ุจูุงูุงุช ุงูุจุทุงูุฉ
  2. ูุญุงูุงุฉ ุฏูุน ูุงุฌุญ
  3. ููุณ ุฎุทูุงุช PayPal
  4. **ูููู ุชุณุฌูู ุงูุฏุฎูู ููุฑุงู**

#### ุฌ) ุงูุนููุงุช ุงูุฑูููุฉ (Crypto - Bitcoin/USDT)
- **ุงูุญุงูุฉ**: ูุชุทูุจ ูุฑุงุฌุนุฉ ุงูุฃุฏูู
- **ุงูุนูููุฉ**:
  1. ุนุฑุถ ุนููุงู ุงููุญูุธุฉ: `TQn9Y2khEsLJW1ChVWFMSMeRDow5oNDMnt`
  2. ุงููุณุชุฎุฏู ูุฑุณู ุงููุจูุบ ููุนููุงู
  3. ุฑูุน ุตูุฑุฉ ููุทุฉ ุงูุดุงุดุฉ (ุฅุซุจุงุช ุงูุฏูุน)
  4. ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `payments`:
     - `status = 'reviewing'`
     - `admin_review_status = 'pending'`
     - `crypto_proof_image = [ุฑุงุจุท ุงูุตูุฑุฉ]`
  5. ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `subscriptions` ุจุญุงูุฉ `inactive`
  6. ุชุญุฏูุซ ุงููุณุชุฎุฏู:
     - `status = 'payment_pending_review'`
     - `subscription_status = 'inactive'`
     - `is_active = false`
  7. ุงูุชูุฌู ูุตูุญุฉ ูุฑุงุฌุนุฉ ุงูุฏูุน
  8. **ูุง ูููู ุชุณุฌูู ุงูุฏุฎูู ุญุชู ููุงููุฉ ุงูุฃุฏูู**

---

### 6๏ธโฃ ุตูุญุฉ ูุฑุงุฌุนุฉ ุงูุฏูุน (Payment Review Page)
- **ุงูููู**: `src/components/payments/PaymentReviewPage.tsx`
- **ููุนููุงุช ุงูุฑูููุฉ ููุท**
- **ุงููููุฒุงุช**:
  - ุนุฑุถ ุญุงูุฉ ุงููุฑุงุฌุนุฉ (pending/approved/rejected)
  - ุชุญุฏูุซ ุชููุงุฆู ูู 30 ุซุงููุฉ
  - ุฒุฑ ููุชุญูู ุงููุฏูู ูู ุงูุญุงูุฉ

#### ุญุงูุฉ ุงูููุงููุฉ (Approved):
- ุชุธูุฑ ุฑุณุงูุฉ "ุชูุช ุงูููุงููุฉ ุนูู ุงูุฏูุน"
- ุฒุฑ "ุชุณุฌูู ุงูุฏุฎูู ุงูุขู"
- **ูููู ุชุณุฌูู ุงูุฏุฎูู**

#### ุญุงูุฉ ุงูุฑูุถ (Rejected):
- ุชุธูุฑ ุฑุณุงูุฉ "ุชู ุฑูุถ ุงูุฏูุน"
- ุณุจุจ ุงูุฑูุถ (ุฅู ูุฌุฏ)
- ุฒุฑ "ุฅุนุงุฏุฉ ุงููุญุงููุฉ"
- **ูุง ูููู ุชุณุฌูู ุงูุฏุฎูู**

---

### 7๏ธโฃ ููุญุฉ ุงูุฅุฏุงุฑุฉ - ูุฑุงุฌุนุฉ ุงูุฏูุนุงุช
- **ุงูููู**: `src/components/admin/PaymentManagement.tsx`
- **ุงูุตูุงุญูุงุช**: ููุฃุฏูู ููุท
- **ุงููููุฒุงุช**:
  - ุนุฑุถ ุฌููุน ุงููุฏููุนุงุช
  - ุชุตููุฉ ุญุณุจ ุงูุญุงูุฉ/ุงูุทุฑููุฉ
  - ุงูุจุญุซ ุจุงูุงุณู/ุงูุจุฑูุฏ
  - ุนุฑุถ ุตูุฑุฉ ุฅุซุจุงุช ุงูุฏูุน

#### ุนูููุฉ ุงูููุงููุฉ:
1. ุงูุฃุฏูู ูุถุบุท "ููุงููุฉ"
2. ุชุญุฏูุซ ุฌุฏูู `payments`:
   - `status = 'completed'`
   - `admin_review_status = 'approved'`
   - `reviewed_by = [ูุนุฑู ุงูุฃุฏูู]`
   - `reviewed_at = [ุงูููุช ุงูุญุงูู]`
3. ุชุญุฏูุซ ุฌุฏูู `subscriptions`:
   - `status = 'active'`
4. ุชุญุฏูุซ ุฌุฏูู `users`:
   - `status = 'active'`
   - `subscription_status = 'active'`
   - `is_active = true`
5. **ุงููุณุชุฎุฏู ููููู ุงูุขู ุชุณุฌูู ุงูุฏุฎูู**

#### ุนูููุฉ ุงูุฑูุถ:
1. ุงูุฃุฏูู ูุถุบุท "ุฑูุถ"
2. ุชุญุฏูุซ ุฌุฏูู `payments`:
   - `status = 'failed'`
   - `admin_review_status = 'rejected'`
   - `reviewed_by = [ูุนุฑู ุงูุฃุฏูู]`
   - `reviewed_at = [ุงูููุช ุงูุญุงูู]`
3. ุชุญุฏูุซ ุฌุฏูู `subscriptions`:
   - `status = 'cancelled'`
4. ุชุญุฏูุซ ุฌุฏูู `users`:
   - `status = 'pending_payment'`
   - `subscription_status = 'inactive'`
   - `is_active = false`
5. **ุงููุณุชุฎุฏู ูุง ููููู ุชุณุฌูู ุงูุฏุฎูู**

---

## ๐ ูุธุงู ุงูุญูุงูุฉ ุนูู ุชุณุฌูู ุงูุฏุฎูู

### ุงูููู: `src/services/simpleAuthService.ts`

### ุดุฑูุท ุชุณุฌูู ุงูุฏุฎูู:
1. โ **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุนู** (`email_verified = true`)
2. โ **ุงูุญุณุงุจ ูุดุท** (`is_active = true`)
3. โ **ุงูุงุดุชุฑุงู ูุดุท** (`subscription_status = 'active'`)
4. โ **ุงูุญุงูุฉ ูุดุทุฉ** (`status = 'active'`)

### ุงูุงุณุชุซูุงุกุงุช:
- **ุงูุฃุฏูู** (`email = 'hichamkhad00@gmail.com'`): ููููู ุงูุฏุฎูู ุฏุงุฆูุงู ุจุฏูู ุดุฑูุท

### ุฑุณุงุฆู ุงูุฎุทุฃ:
- "ูุฌุจ ุชูุนูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃููุงู"
- "ูุฌุจ ุฅููุงู ุงูุงุดุชุฑุงู ูุงูุฏูุน ูุจู ุชุณุฌูู ุงูุฏุฎูู"
- "ุฏูุนุชู ููุฏ ุงููุฑุงุฌุนุฉ ูู ูุจู ุงูุฅุฏุงุฑุฉ"
- "ุญุณุงุจู ุบูุฑ ูุดุท. ูุฑุฌู ุงูุชูุงุตู ูุน ุงูุฏุนู"

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `users`
```sql
- id (UUID)
- auth_id (UUID) โ auth.users
- username (TEXT)
- email (TEXT)
- full_name (TEXT)
- country (TEXT)
- role ('admin' | 'trader')
- is_active (BOOLEAN) โ ูุญุฏุฏ ุฅููุงููุฉ ุงูุฏุฎูู
- email_verified (BOOLEAN) โ ูุฌุจ ุฃู ูููู true
- status (TEXT) โ ุงูุญุงูุฉ ุงูุญุงููุฉ ูููุณุชุฎุฏู
  * 'pending_email_verification'
  * 'pending_subscription'
  * 'pending_payment'
  * 'payment_pending_review'
  * 'active'
  * 'suspended'
  * 'cancelled'
- subscription_status ('active' | 'inactive' | 'expired' | 'cancelled')
- subscription_end_date (TIMESTAMP)
```

### ุฌุฏูู `subscription_plans`
```sql
- id (UUID)
- name (TEXT)
- name_ar (TEXT)
- description (TEXT)
- description_ar (TEXT)
- price (NUMERIC)
- duration (TEXT)
- duration_months (INTEGER)
- features (JSONB)
- is_active (BOOLEAN)
```

### ุฌุฏูู `subscriptions`
```sql
- id (UUID)
- user_id (UUID) โ users
- plan_id (UUID) โ subscription_plans
- status ('active' | 'inactive' | 'cancelled' | 'expired')
- start_date (TIMESTAMP)
- end_date (TIMESTAMP)
- auto_renew (BOOLEAN)
```

### ุฌุฏูู `payments`
```sql
- id (UUID)
- user_id (UUID) โ users
- subscription_id (UUID) โ subscriptions
- amount (NUMERIC)
- currency (TEXT)
- payment_method ('paypal' | 'credit_card' | 'bitcoin' | 'crypto')
- status ('pending' | 'completed' | 'failed' | 'reviewing')
- transaction_id (TEXT)
- crypto_proof_image (TEXT) โ ุฑุงุจุท ุงูุตูุฑุฉ
- crypto_wallet_address (TEXT)
- admin_review_status ('pending' | 'approved' | 'rejected')
- admin_review_notes (TEXT)
- reviewed_by (UUID) โ users
- reviewed_at (TIMESTAMP)
```

---

## ๐ ูุฎุทุท ุงูุชุฏูู

```
1. ูุชุญ ุงูุชุทุจูู
   โ
2. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (Landing Page)
   โ
3. ุงูุชุณุฌูู (Register)
   โ
4. ุชูุนูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   โ
5. ุงุฎุชูุงุฑ ุงูุจุงูุฉ (Subscription)
   โ
6. ุตูุญุฉ ุงูุฏูุน (Payment)
   โ
   โโโ PayPal/Card โ ุงููุฌุงุญ โ ุชุณุฌูู ุงูุฏุฎูู โ
   โ
   โโโ Crypto โ ุฑูุน ุงูุตูุฑุฉ โ ุตูุญุฉ ุงููุฑุงุฌุนุฉ
       โ
       โโโ ููุงููุฉ ุงูุฃุฏูู โ ุชุณุฌูู ุงูุฏุฎูู โ
       โ
       โโโ ุฑูุถ ุงูุฃุฏูู โ ูุง ูููู ุงูุฏุฎูู โ
```

---

## โ๏ธ ููุงุท ูููุฉ

### 1. ุงูุฃูุงู
- โ ุงูุชุญูู ูู ุฌููุน ุงูุดุฑูุท ูุจู ุงูุณูุงุญ ุจุชุณุฌูู ุงูุฏุฎูู
- โ Row Level Security (RLS) ููุนู ุนูู ุฌููุน ุงูุฌุฏุงูู
- โ ุงูุชุญูู ูู ุตูุงุญูุงุช ุงูุฃุฏูู ูุจู ูุฑุงุฌุนุฉ ุงูุฏูุนุงุช

### 2. ุชุฌูุจ ุงูุชุนุงุฑุถุงุช
- โ ุงุณุชุฎุฏุงู ุฏูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช (`update_payment_status_with_subscription`)
- โ ุชุญุฏูุซ ุฌููุน ุงูุฌุฏุงูู ุงููุฑุชุจุทุฉ ูู ูุนุงููุฉ ูุงุญุฏุฉ
- โ ุงูุชุญูู ูู ุงูุญุงูุฉ ูุจู ูู ุนูููุฉ

### 3. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- โ ุฑุณุงุฆู ูุงุถุญุฉ ูู ูู ุฎุทูุฉ
- โ ุชุญุฏูุซ ุชููุงุฆู ูุญุงูุฉ ุงููุฑุงุฌุนุฉ
- โ ุฅููุงููุฉ ุงูุชุญูู ุงููุฏูู ูู ุงูุญุงูุฉ

### 4. ููุญุฉ ุงูุฅุฏุงุฑุฉ
- โ ุนุฑุถ ุฌููุน ุงููุฏููุนุงุช ูุน ุงูุชูุงุตูู
- โ ุชุตููุฉ ูุจุญุซ ูุชูุฏู
- โ ุนุฑุถ ุตูุฑุฉ ุฅุซุจุงุช ุงูุฏูุน
- โ ููุงููุฉ/ุฑูุถ ุจุถุบุทุฉ ูุงุญุฏุฉ

---

## ๐ง ุงููููุงุช ุงูุฑุฆูุณูุฉ

### ุตูุญุงุช ุงููุณุชุฎุฏู:
- `src/pages/LandingPage.tsx` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- `src/components/auth/RegisterPage.tsx` - ุงูุชุณุฌูู
- `src/components/auth/EmailVerificationPage.tsx` - ุชูุนูู ุงูุจุฑูุฏ
- `src/components/subscription/SubscriptionPage.tsx` - ุงุฎุชูุงุฑ ุงูุจุงูุฉ
- `src/components/payments/PaymentPage.tsx` - ุงูุฏูุน
- `src/components/payments/PaymentReviewPage.tsx` - ูุฑุงุฌุนุฉ ุงูุฏูุน
- `src/components/payments/PaymentSuccessPage.tsx` - ูุฌุงุญ ุงูุฏูุน

### ููุญุฉ ุงูุฅุฏุงุฑุฉ:
- `src/components/admin/AdminPanel.tsx` - ุงูููุญุฉ ุงูุฑุฆูุณูุฉ
- `src/components/admin/PaymentManagement.tsx` - ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช
- `src/components/admin/SubscriptionManagement.tsx` - ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช

### ุงูุฎุฏูุงุช:
- `src/services/simpleAuthService.ts` - ุงููุตุงุฏูุฉ
- `src/services/subscriptionService.ts` - ุงูุงุดุชุฑุงูุงุช
- `src/services/paymentService.ts` - ุงููุฏููุนุงุช
- `src/services/emailService.ts` - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- `database_setup.sql` - ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุงููุฉ

---

## ๐ ููุงุญุธุงุช ูููุทูุฑ

1. **ุนููุงู ุงููุญูุธุฉ**: `TQn9Y2khEsLJW1ChVWFMSMeRDow5oNDMnt` (USDT TRC20)
2. **ุงูุจุฑูุฏ ุงูุฃุฏูู**: `hichamkhad00@gmail.com`
3. **Storage Bucket**: `payment-proofs` (ูุตูุฑ ุฅุซุจุงุช ุงูุฏูุน)
4. **ุงูุชุญุฏูุซ ุงูุชููุงุฆู**: ูู 30 ุซุงููุฉ ูู ุตูุญุฉ ุงููุฑุงุฌุนุฉ
5. **ุญุฌู ุงูุตูุฑุฉ**: ุญุฏ ุฃูุตู 5MB
6. **ุตูุบ ุงูุตูุฑ ุงูููุจููุฉ**: JPG, PNG, GIF

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [x] ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุนุฏุฉ ุจุงููุงูู
- [x] ุฌููุน ุงูุฌุฏุงูู ููุฌูุฏุฉ
- [x] RLS ููุนู ููุถุจูุท
- [x] ุตูุญุงุช ุงูุชุณุฌูู ูุงูุงุดุชุฑุงู ุฌุงูุฒุฉ
- [x] ุตูุญุฉ ุงูุฏูุน ุชุฏุนู ุฌููุน ุงูุทุฑู
- [x] ุตูุญุฉ ูุฑุงุฌุนุฉ ุงูุฏูุน ุฌุงูุฒุฉ
- [x] ููุญุฉ ุงูุฅุฏุงุฑุฉ ุฌุงูุฒุฉ
- [x] ูุธุงู ุงูุญูุงูุฉ ุนูู ุชุณุฌูู ุงูุฏุฎูู ูุทุจู
- [x] ุงูุชุญูู ูู ุงูุงุดุชุฑุงู ูุจู ุงูุฏุฎูู
- [x] ุฏูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ
- [x] Storage Bucket ููุตูุฑ ูุนุฏ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. ุงุฎุชุจุงุฑ ุงูุชุฏูู ุงููุงูู ูู ุงูุจุฏุงูุฉ ููููุงูุฉ
2. ุงูุชุฃูุฏ ูู ุนูู ุฌููุน ุทุฑู ุงูุฏูุน
3. ุงุฎุชุจุงุฑ ููุงููุฉ/ุฑูุถ ุงูุฃุฏูู
4. ุงูุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ
5. ุงุฎุชุจุงุฑ ุนูู ุฃุฌูุฒุฉ ูุฎุชููุฉ

---

**ุชุงุฑูุฎ ุงูุชูุซูู**: 13 ุฃูุชูุจุฑ 2025
**ุงูุฅุตุฏุงุฑ**: 1.0
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุงุฎุชุจุงุฑ โ
